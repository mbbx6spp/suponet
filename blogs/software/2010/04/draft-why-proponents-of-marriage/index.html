

  
  <meta charset="utf-8"><meta http-equiv="content-type" content="text/html; charset=UTF-8"><link href="/images/favicon.ico" rel="shortcut icon"><title>Susan Potter: DRAFT: Why proponents of marriage equality should love graph databases, Part 2: A Reply to 'The Database Engineering Perspective'</title><!--
  <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.css"/>
  --><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/stylesheets/styles.css"><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script><script async="async" defer src="/javascripts/app.js"></script><meta content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" name="viewport"><link rel="stylesheet" type="text/css" href="/stylesheets/coderay.css"><header><div class="container">
    <a href="/">
      <img alt="Susan Potter" height="30" src="/images/logo.png" width="128"></a>
    <nav><a href="/about/">About</a>
      <a href="/resume/">Resume</a>
      <a href="/portfolio/">Portfolio</a>
      <a href="/favorites/">Favo(u)rites</a>
      <a href="/contact/">Contact</a>
      <a target="_blank" id="twitter" class="icon" href="http://twitter.com/SusanPotter"><img src="/images/twitter.png" height="30" width="30" alt="@SusanPotter's Twitter feed"></a>
      <a target="_blank" id="linked" class="icon" href="http://www.linkedin.com/in/susanpotter"><img src="/images/linkedin.png" height="30" width="30" alt="Susan Potter's LinkedIn profile"></a>
      <a target="_blank" id="github" class="icon" href="https://github.com/mbbx6spp"><img src="/images/github.png" height="30" width="30" alt="Susan Potter's GitHub open source code repository profile"></a>
    </nav>
</div>
</header><div class="text post sidebar">
      <aside><ul class="share-buttons">
<li class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="SusanPotter">Tweet</a></li>
          <li class="plusone">
          <!--
          <li class="linked"><script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-counter="top"></script></li>
          <li class="reddit"><script type="text/javascript" src="http://www.reddit.com/static/button/button2.js"></script></li>
          <li class="facebook"><iframe src="http://www.facebook.com/plugins/like.php?app_id=130334077058276&amp;send=false&amp;layout=box_count&amp;width=170&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font=lucida+grande&amp;height=90" scrolling="no" frameborder="0" style="text-align: right; border:none; overflow:hidden; width:170px; height:90px;" allowTransparency="true"></iframe></li>
          -->
        </ul></aside><section><article><h1 class="banner">
            Software Development Blog <small>(formerly called 'Snakes, Gems &amp; Coffee')</small>
            <span class="description">
              A technical blog with articles on a number of topics from Erlang, Ruby idioms, Javascript,
              semantic web, Rails tips, graph databases, distributed systems.
            </span>
          </h1>
          
          <h2>DRAFT: Why proponents of marriage equality should love graph databases, Part 2: A Reply to 'The Database Engineering Perspective'</h2>
          So
<a href="http://geek.susanpotter.net/2010/03/why-proponents-of-marriage-equality.html" target="_blank">in part 1</a>
I provided an
<a href="http://geek.susanpotter.net/2010/03/why-proponents-of-marriage-equality.html" target="_blank">
  overview of problems relational databases (<acronym title="Relational Database Management Systems">RDBMS</acronym>) have with modelling relationships
</a>
as well as
<a href="http://geek.susanpotter.net/2010/03/why-proponents-of-marriage-equality.html" target="_blank">entities that have datasets that are only partially structured in structure and definition</a>
based on my experiences.
<br><br>
This post will:
<br><ol>
<li>introduce new concepts utilized in graph databases and specific terminology for Neo databases</li>
  <li>
    review the most flexible schemas that accommodate both same-sex and opposite-sex marriages alike that were presented in the blog post I am responding to,
    <a href="http://qntm.org/gay" target="_blank">
      <em>'Gay Marriage: The Database Engineering Perspective'</em>
    </a>.
  </li>
  <li>describe how graph databases could overcome the relational database shortcomings</li>
  <li>finally I will present a snippet of code (not meant for production use, but merely to demonstrate how we can use Neo4J) that makes it more natural to represent richer relationships between entities (or nodes as Neo4J calls them) that have substance to them (i.e. attributes in this case)</li>
</ol>
<br><h4>New Concepts in Graph Databases</h4>Before
I can explain how graph databases on a conceptual level can overcome most if not all (for most of the time anyway) of the relational databases (<acronym title="relational database management systems">RDBMS</acronym>) shortcomings mentioned in the previous post, we need to be introduced to new concepts and terminology.
<br>
There are two basic classes of objects in a graph database, they are:
<br><ul>
<li>
    <strong>Nodes:</strong>
    a
    <em>node</em>
    is basically an entity as RDBMS people (like probably you and I) are familiar with.  A
    <em>node</em>
    could represent a person, customer, blog post, photograph, video or tweet.  It isn't always true, nor is it a good idea to think of graph database concepts only in terms of RDBMS concepts, but we could consider most tables that do not represent an actual
    <em>relationship</em>
    or association between other tables as an entity.  It is a simplification, so use only in this initial learning phase cautiously.  A
    <em>node</em>
    can have zero or more properties.
  </li>
  <li>
    <strong>Relatioships:</strong>
    a
    <em>relationship</em>
    is the concept of an association between two
    <em>node</em>s
    that needs to be represented in your data store somehow.  A
    <em>relationship</em>
    can also have zero or more properties, just like a
    <em>node</em>.
  </li>
</ul>
<br>
The third concept in graph databases is that of a
<em>property</em>.
It unifies
<em>node</em>s
and
<em>relationship</em>s
as both first class citizens of the data store, which is quite unlike relational databases.
<br><br>
In a relational database we try to either reduce an association between two entities/tables to a small handful of cases, which might use references (if supported by that particular vendor and version of RDBMS), create "join tables" or we might force a natural relationship to become a table itself so that we are able to capture pertinent attributes for it.  There is no other way of handling relationships.  In many cases it might not be an issue to reduce the problem in these ways, however, the more and more interconnected our
<em>entities</em>
become with new types of relationships it seems (to me) that this method of modelling data quickly becomes problematic.
<br><br>
The following are other useful terms that the Neo graph database family uses, but conceptually most of these will also have a synonym in other graph databases:
<br><ul>
<li>
    <strong>Traversers:</strong>
    in graph databases "querying" for specific data is not done via declarative query statements and clauses like SQL.  Rather we define
    <em>traversers</em>
    that are composed of the following elements:
    <br><ul>
<li>the starting node</li>
      <li>the relationship types needing to be traversed</li>
      <li>the stop criteria</li>
      <li>the selection criteria</li>
      <li>traversing order (e.g. breadth first, etc.)</li>
    </ul>We
    need to know the starting node so the graph database knows where to start the traversal. The
    <em>traverser</em>
    will then only move along relationships of the types given by the second element of a
    <em>traverser</em>,
    evaluate the selection criteria to know which nodes are relevant tot he "query", then evaluate whether the stop criteria applies to know when traversing should stop.
    <br>
</li>
  <li>
    <strong>Indexers:</strong>
    In Neo4J there are several indexing utilities backed by a Lucene backend that make it easy to index actual nodes, full text and based on timelines.  This allows us to look up relevant starting nodes for traversing.
  </li>
</ul>
<br><h4>How can graph databases overcome relational database shortcomings?</h4>Now
we will have a quick peak at how the new concepts and ideas from graph databases can resolve the complaints I had about relational databases:
<br><ul>
<li>
    In response to
    <em>A lot of real world data isn't highly structured (only partially)</em>:
    with graph databases we only need to set the properties a specific node actually has.  We do not need to fill in lots of
    <code>nulls</code>
    in attributes that aren't relevant like we do in RDBMSes.  Our graph database "model" interface might be able to add any constraints that are necessary.  While, in situations where highly structured data sets really do occur, I prefer having two sets of constraints - those on the relational database level and those in the "model" (application tier) - however, it can quickly become hard to manage when two sets of constraints that should be identical are defined in vastly different ways (languages).
  </li>
  <li>
    In response to
    <em>Object to relational mapping (ORM) constraints and disjoints</em>:
    using nodes and relationships conceptually on the graph database layer you have little if any translation between 'objects' that represent nodes or relationships.
  </li>
  <li>
    In response to
    <em>Weak and inefficient "traversal" support</em>:
    this isn't a problem with graph databases.  Traversing data is much more relevant when dealing with data that is naturally in a network or graph formation already.  Relational databases cannot handle networks or graph-like data sets without a lot of workarounds.
  </li>
  <li>
    In response to
    <em>Maintaining and evolving relational schemas</em>:
    when the data sets you are dealing with are not highly structured and densely populated evolving strict data schemas do not need to be maintained and with Neo4J's flexible attribute setting/getting, data structures can be flexibly evolved when the data itself changes, however, this raises another issue of application code being able to read the old attributes in the graph database, but I will talk about that in Part 3.
  </li>
</ul>
<br><h4>Gay marriage: the graph database solution</h4>
<script src="http://gist.github.com/354659.js"></script></article></section>
</div>
    <footer><p>
    Copyright © 2006-2013 <a href="http://susanpotter.net">Susan Potter</a>.
  </p>
  <p>
    This website is developed by <a href="http://susanpotter.net">Susan Potter</a>.
  </p>
  <div id="rights">
    <a href="http://susanpotter.net">Susan Potter</a> reserves all rights to the copy and intellectual rights that are presented on this website as original material to <a href="http://susanpotter.net">Susan Potter</a>.
    Links: <a href="http://susanpotter.net/resume/software-engineer">Software Engineer Extraordinaire</a>,
           <a href="http://susanpotter.net/resume/developer">Software Developer Extraordinaire</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Software Engineer</a>,
           <a href="http://susanpotter.net/resume/architect">Application Architect</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Ruby Software Engineer</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Ruby Engineer</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Ruby on Rails Engineer</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Ruby on Rails Software Engineer</a>,
           <a href="http://susanpotter.net/resume/developer">Software Developer</a>,
           <a href="http://susanpotter.net/resume/architect">Software Architect</a>,
           <a href="http://susanpotter.net/resume/software-engineer">Hedge Fund Software Engineer</a>,
           <a href="http://susanpotter.net/resume/developer">Hedge Fund Software Developer</a>,
           <a href="http://susanpotter.net/">Web Services Software Engineer</a>,
           <a href="http://susanpotter.net/">Web Services Software Developer</a>,
           <a href="http://susanpotter.net/">Web Services Engineer</a>,
           <a href="http://susanpotter.net/">Web Services Developer</a>,
           <a href="http://susanpotter.net/resume/restful-design">REST Software Engineer</a>,
           <a href="http://susanpotter.net/resume/restful-design">REST Software Developer</a>,
           <a href="http://susanpotter.net/resume/restful-design">Resource Oriented Architecture</a>,
  </div>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script><script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-837842-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setDetectFlash', false]);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script></footer><script type="text/javascript">
      (function($) {
        var btns = $('.share-buttons .plusone').html('<g:plusone size="tall"></g:plusone>');
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })(jQuery);
    </script><!-- Place this tag just before your close body tag -->