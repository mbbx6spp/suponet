

  
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html">
  <link href="/images/favicon.ico" rel="shortcut icon">
  <meta content="width=device-width, minimum-scale=1.0, maximum-scale=1.5" name="viewport">
  <title>Susan Potter: Ruby Idioms, Part 4</title>
  <link rel="stylesheet" type="text/css" href="/stylesheets/reset.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/stylesheets/styles.css">
  <link rel="stylesheet" type="text/css" href="/stylesheets/coderay.css">


  
    <header>
  <div class="container">
    <a href="/">
      <img alt="Susan Potter" height="30" src="/images/logo.png" width="128">
    </a>
    <nav>
      <a href="/about/">About</a>
      <a href="/resume/">Resume</a>
      <a href="/portfolio/">Portfolio</a>
      <a href="/talks/">Talks</a>
      <a href="/contact/">Contact</a>
      <a target="_blank" id="twitter" class="icon" href="https://twitter.com/SusanPotter"><img src="/images/twitter.png" height="30" width="30" alt="@SusanPotter's Twitter feed"></a>
      <a target="_blank" id="linked" class="icon" href="https://www.linkedin.com/in/susanpotter"><img src="/images/linkedin.png" height="30" width="30" alt="Susan Potter's LinkedIn profile"></a>
      <a target="_blank" id="github" class="icon" href="https://github.com/mbbx6spp"><img src="/images/github.png" height="30" width="30" alt="Susan Potter's GitHub open source code repository profile"></a>
    </nav>
  </div>
</header>


    <div class="text post sidebar">
      <aside class=".hidden-xs .hidden-sm">
        <ul class="share-buttons">
          <li class="twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-count="vertical" data-via="SusanPotter">Tweet</a></li>
          <li class="plusone">
          <li class="linked">
<script type="text/javascript" src="https://platform.linkedin.com/in.js"></script><script type="in/share" data-counter="top"></script>
</li>
        </ul>
      </aside>
      <section>
        <article>
          <h1 class="banner">
            Software Development Blog <small>(formerly called 'Snakes, Gems &amp; Coffee')</small>
            <span class="description">
              A technical blog with articles on a number of topics from Erlang, Ruby idioms, Javascript,
              semantic web, Rails tips, graph databases, distributed systems.
            </span>
          </h1>
          
          <h2>Ruby Idioms, Part 4</h2>
          <h5 class="time">2007-01-22 19:36:00 -0600</h5>
          To splat or not to splat, that is the question.

In Java to unpack an array's values into separate variables you would need to do something like the following:
%pre
  :preserve
    
    burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger]
    t = burgers[0]
    u = burgers[1]
    v = burgers[2]
    w = burgers[3]
In the Ruby mindset this would look more like the following:
%pre
  :preserve
    
    burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger]
    t, u, v = *burgers # t=&gt;:hamburger, u=&gt; :bocaburger, v=&gt;:gardenburger
    t, u, v, w = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger
    t, u, v, w, x = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger, x=&gt;nil
Think of * (or splat) as the Ruby way of unpacking the elements of an Array into separate variables in Ruby.  This brings me to an even nicer example.  Many moons ago, when I was working on a Java/J2EE project, I found a piece of code that looked something like the following (except it has been Rubyfied for this blog entry so that I do not get sued for sharing outrageously fantastic proprietary code with the public - ok, ok....even lawyers would understand this couldn't be called outrageously fantastic even in a parallel universe):
%pre
  :preserve
    
    class RunnableWithParams &lt;&lt; Thread
      def initialize(param1)
        @param1 = param1
      end
    
      def initialize(param1, param2)
        @param1 = param1
        @param2 = param2
      end
    
      def initialize(param1, param2, param3)
        @param1 = param1
        @param2 = param2
        @param3 = param3
      end
    
      def run
        # some code the uses param1, param2, etc. - in Java this was an empty method body or abstract  - can't remember
      end
    end
Rubifying the the code sure does take some of the sting out of it, but you can probably still feel my initial pain when I realized what kind of code I was inheriting.

The class name and the variables are in fact the same as the original code.  The problem this tried to solve, which I suppose it did solve in a stupid way, was to allow Java code to pass parameters over to the thread's logic (which, at least, at the time was not possible to do) in the context of an anonymous class implementation of the method.  Now if you wanted to pass in 4 parameters, you were out of luck OR you had to beg the core framework people to add that constructor OR you had to do an ugly JAR patch hack and put your own implementation of
%code RunnableWithParams
class ahead of the core framework JAR in your CLASSPATH.  They were all pretty ugly scenarios.  Of course, you could pass in a List or Map instance, but that really isn't the point.

The most obvious optimization to the code from a readability, extensibility and utility perspective would be to pass in a list to the class's constructor and use elements in the list in the run method logic.  However, Ruby provides a nicer way of doing things from the perspective of the client code:
%pre
  :preserve
    
    class RunnableWithParams &lt;&lt; Thread
      def initialize(*params)
        @params = params
      end
      def run # needs to be defined by clients
      end
    end
The client code for using this class would look like the following:
%pre
  :preserve
    
    rwp = RunnableWithParams.new param1, param2, param3, param4
    # instead of the initially optimized suggestion, where the client code would look like the following
    rwp = RunnableWithParams.new [param1, param2, param3, param4]
In my view the first line of the snippet above is slightly superior because it is more natural in the way it reads.  Again, different people will have different views on this perhaps, but both lines of code provide a decent solution.

        </article>
      </section>
    </div>
    <footer>
  <p>
    Copyright Â© 2006-2018 <a href="//susanpotter.net">Susan Potter</a>.
  </p>
  <p>
    This website is developed by <a href="//susanpotter.net">Susan Potter</a>.
  </p>
  <div id="rights">
    <a href="//susanpotter.net">Susan Potter</a> reserves all rights to the copy and intellectual rights that are presented on this website as original material to <a href="//susanpotter.net">Susan Potter</a>.
    Links: <a href="//susanpotter.net/resume/software-engineering/">Software Engineer Extraordinaire</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Software Developer Extraordinaire</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Software Engineer</a>,
           <a href="//susanpotter.net/resume/architect/">Application architect/</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Ruby Software Engineer</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Ruby Engineer</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Ruby on Rails Engineer</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Ruby on Rails Software Engineer</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Software Developer</a>,
           <a href="//susanpotter.net/resume/architect/">Software architect/</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Hedge Fund Software Engineer</a>,
           <a href="//susanpotter.net/resume/software-engineering/">Hedge Fund Software Developer</a>,
           <a href="//susanpotter.net/">Web Services Software Engineer</a>,
           <a href="//susanpotter.net/">Web Services Software Developer</a>,
           <a href="//susanpotter.net/">Web Services Engineer</a>,
           <a href="//susanpotter.net/">Web Services Developer</a>,
           <a href="//susanpotter.net/resume/restful-design/">REST Software Engineer</a>,
           <a href="//susanpotter.net/resume/restful-design/">REST Software Developer</a>,
           <a href="//susanpotter.net/resume/restful-design/">Resource Oriented architect/ure</a>,
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-837842-1', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
  
  
  <script async="async" defer src="/javascripts/app.js"></script>
  <script>
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
</footer>

    <script type="text/javascript">
      (function($) {
        var btns = $('.share-buttons .plusone').html('<g:plusone size="tall"></g:plusone>');
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })(jQuery);
    </script>
    <!-- Place this tag just before your close body tag -->
  

